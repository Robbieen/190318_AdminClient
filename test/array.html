<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
</head>
<body>
  <script>
    /* 
    自定义实现一组数组声明式方法
    1. map()
    2. reduce()
    3. filter()
    4. find()
    5. findIndex()
    6. every()
    7. some()
    */
    const arr = [1, 3, 5, 7, 9]

    /* 1. map() */  
    Array.prototype.map = function (callback) {
      const arr = []
      for (let i = 0; i < this.length; i++) {
        arr.push(callback(this[i], i))
      }
      return arr
    }
    console.log(
      arr.map((item, index) => {
        if (index%2===0) {
          return item + 10
        } else {
          return item - 10
        }
      })
    )

    /* 2. reduce() */
    Array.prototype.reduce = function (callback, initVal) {
      let total = initVal
      for (let i = 0; i < this.length; i++) {
        total = callback(total, this[i], i)
      }
      return total
    }
    console.log(
      arr.reduce((pre, item, index) => {
        if (index % 2 ==1) {
          pre += item
        }
        return pre
      }, 0)
    )

    /* 3. filter() */
    Array.prototype.filter = function (callback) {
      const arr = []
      for (let i = 0; i < this.length; i++) {
        if (callback(this[i], i)) {
          arr.push(this[i])
        }
      }
      return arr
    }
    console.log(arr.filter((item, index) => item%2===1 && index%2===1))

    /* 4. find() */
    Array.prototype.find = function (callback) {
      for (let i = 0; i < this.length; i++) {
        if (callback(this[i], i)) {
          return this[i]
        }
      }
      return
    }
    console.log(arr.find((item, index) => item > 3))

    /* 5. findIndex() */
    Array.prototype.findIndex = function (callback) {
      for (let i = 0; i < this.length; i++) {
        if (callback(this[i], i)) {
          return i
        }
      }
      return -1
    }
    console.log(arr.findIndex((item, index) => item > 3))

    /* 6. every() */
    Array.prototype.every = function (callback) {
      for (let i = 0; i < this.length; i++) {
        if (!callback(this[i], i)) {
          return false
        }
      }
      return true
    }
    console.log(arr.every((item, index) => item > 3))

    /* 7. some() */
    Array.prototype.some = function (callback) {
      for (let i = 0; i < this.length; i++) {
        if (callback(this[i], i)) {
          return true
        }
      }
      return false
    }
    console.log(arr.some((item, index) => item > 3))

  </script>
</body>
</html>